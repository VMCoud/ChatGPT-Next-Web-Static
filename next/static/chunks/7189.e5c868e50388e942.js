(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7189],{86224:function(e,t,n){"use strict";var s,i,r=n(86006);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),s||(s=r.createElement("defs",null,r.createElement("path",{id:"clear_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,i||(i=r.createElement("mask",{id:"clear_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#clear_svg__a"}))),r.createElement("g",{mask:"url(#clear_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 5)",d:"M1 9.67h8.67l1-9.67H0l1 9.67Z"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.667 8.334)",d:"M0 0v3.33"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.334 8.333)",d:"M0 0v3.33"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(4 1)",d:"m0 4 5.44-4L8 4"}))))}},46011:function(e,t,n){"use strict";var s,i,r=n(86006);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),s||(s=r.createElement("defs",null,r.createElement("path",{id:"copy_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,i||(i=r.createElement("mask",{id:"copy_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#copy_svg__a"}))),r.createElement("g",{mask:"url(#copy_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 2.48V.94C0 .42.42 0 .94 0h8.12c.52 0 .94.42.94.94v8.12c0 .52-.42.94-.94.94H7.51",transform:"translate(4.333 1.667)"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M.94 0C.42 0 0 .42 0 .94v8.12c0 .52.42.94.94.94h8.12c.52 0 .94-.42.94-.94V.94C10 .42 9.58 0 9.06 0H.94Z",transform:"translate(1.667 4.333)"}))))}},80199:function(e,t,n){"use strict";var s,i,r=n(86006);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),s||(s=r.createElement("defs",null,r.createElement("path",{id:"edit_svg__a",d:"M0 0h16v16H0z"}))),r.createElement("g",null,i||(i=r.createElement("mask",{id:"edit_svg__b",fill:"#fff"},r.createElement("use",{xlinkHref:"#edit_svg__a"}))),r.createElement("g",{mask:"url(#edit_svg__b)"},r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.5 11)",d:"M2.83 0v3c0 .37-.3.67-.66.67H0"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 1.333)",d:"M10.67 4V.67c0-.37-.3-.67-.67-.67H.67C.3 0 0 .3 0 .67v12c0 .36.3.66.67.66h2"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.333 5.333)",d:"M0 0h4.67"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(7.667 7.667)",d:"m0 7 5.67-7"}),r.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.333 8)",d:"M0 0h2.67"}))))}},16778:function(e,t,n){"use strict";n.d(t,{qE:function(){return P},aR:function(){return y},eL:function(){return T}});var s,i,r,a,l,o,c,u,d,p,m,h,g,v,x=n(9268),f=n(73031),j=n(28584),C=n(86006);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var k=function(e){return C.createElement("svg",b({className:"black-bot_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:128,height:128},e),s||(s=C.createElement("path",{d:"M416.968 782.713H628.83v135.356c0 58.503-47.433 105.931-105.93 105.931-58.51 0-105.932-47.428-105.932-105.931V782.713z",fill:"#C5AC95"})),i||(i=C.createElement("path",{d:"M891.586 523.77H126.53V147.126C126.529 65.871 192.4 0 273.655 0H744.46c81.255 0 147.126 65.871 147.126 147.126V523.77z",fill:"#4D4132"})),r||(r=C.createElement("path",{d:"M106.702 557.986c0 51.777 41.972 93.749 93.749 93.749 51.77 0 93.743-41.972 93.743-93.75 0-51.77-41.972-93.742-93.749-93.742-51.77 0-93.743 41.972-93.743 93.749z",fill:"#C9AB90"})),a||(a=C.createElement("path",{d:"M492.097 78.848c172.585 0 312.479 139.9 312.479 312.485v354.145c0 92.042-74.611 166.653-166.653 166.653H304.605c-69.026 0-124.987-55.967-124.987-124.993V391.333c0-172.585 139.894-312.485 312.479-312.485z",fill:"#EBD3BD"})),l||(l=C.createElement("path",{d:"M138.299 114.759a270.713 97.103 0 1 0 541.425 0 270.713 97.103 0 1 0-541.425 0ZM691.494 632.644a100.046 79.448 0 1 0 200.092 0 100.046 79.448 0 1 0-200.092 0Z",fill:"#4D4132"})),o||(o=C.createElement("path",{d:"M731.666 557.986c0 51.777 41.972 93.749 93.743 93.749s93.749-41.972 93.749-93.75c0-51.77-41.978-93.742-93.75-93.742s-93.748 41.972-93.748 93.749z",fill:"#EBD3BD"})),c||(c=C.createElement("path",{d:"M783.743 547.57a41.666 41.666 0 1 0 83.332.017 41.666 41.666 0 0 0-83.332-.018z",fill:"#E89E80"})),u||(u=C.createElement("path",{d:"M200.445 422.577a83.332 83.332 0 1 0 166.659 0c0-46.022-37.311-83.327-83.332-83.327s-83.327 37.311-83.327 83.332z",fill:"#FFF"})),d||(d=C.createElement("path",{d:"M242.111 427.785a36.458 36.458 0 1 0 72.916 0 36.458 36.458 0 0 0-72.916 0z",fill:"#514141"})),p||(p=C.createElement("path",{d:"M492.097 422.577c0 46.02 37.311 83.332 83.332 83.332s83.32-37.311 83.32-83.332-37.305-83.327-83.326-83.327-83.332 37.311-83.332 83.332z",fill:"#FFF"})),m||(m=C.createElement("path",{d:"M533.763 427.785a36.458 36.458 0 1 0 72.91 0 36.458 36.458 0 0 0-72.916 0z",fill:"#514141"})),h||(h=C.createElement("path",{d:"M738.575 559.08c35.751 0 64.735 28.984 64.735 64.736v138.299c0 112.134-90.9 203.034-203.034 203.034H353.103c-112.133 0-203.034-90.9-203.034-203.034V623.816c0-35.752 28.984-64.736 64.736-64.736h523.77zm-229.518 52.966H326.621a41.195 41.195 0 0 0-41.196 41.195v50.023c0 50.376 40.843 91.219 91.219 91.219h82.39c50.377 0 91.219-40.843 91.219-91.219v-50.023a41.195 41.195 0 0 0-41.196-41.195z",fill:"#4D4132"})),g||(g=C.createElement("path",{d:"M354.445 683.255c29.108 11.376 49.258 17.067 60.452 17.067 11.193 0 31.343-5.691 60.45-17.067a11.77 11.77 0 0 1 16.055 10.964v21.698a11.77 11.77 0 0 1-7.415 10.935c-34.369 13.7-57.397 20.55-69.09 20.55-11.688 0-34.722-6.85-69.091-20.55a11.77 11.77 0 0 1-7.415-10.935V694.22a11.77 11.77 0 0 1 16.054-10.964zM403.562 412.16a37.182 37.182 0 0 1 34.934 24.482l38.853 106.843a72.916 72.916 0 0 1-68.508 97.827h-16.46a72.916 72.916 0 0 1-67.473-100.516l42.755-104.53a38.788 38.788 0 0 1 35.899-24.106z",fill:"#E89E80"})),v||(v=C.createElement("path",{d:"M220.69 288.368h129.47q29.426 0 29.426 29.425t-29.425 29.425H220.69q-29.426 0-29.426-29.425t29.426-29.425ZM516.279 233.585l122.418 42.151q27.822 9.58 18.242 37.403-9.58 27.822-37.402 18.242l-122.418-42.152q-27.822-9.58-18.242-37.402 9.58-27.822 37.402-18.242Z",fill:"#4D4132"})))};function S(e,t){return"https://cdn.staticfile.org/emoji-datasource-apple/14.0.0/img/".concat(t,"/64/").concat(e,".png")}function y(e){return(0,x.jsx)(f.ZP,{lazyLoadEmojis:!0,theme:f.Q2.AUTO,getEmojiUrl:S,onEmojiClick:t=>{e.onEmojiClick(t.unified)}})}function P(e){if(e.model){var t;return(0,x.jsx)("div",{className:"no-dark",children:(null===(t=e.model)||void 0===t?void 0:t.startsWith("gpt-4"))?(0,x.jsx)(k,{className:"user-avatar"}):(0,x.jsx)(j.Z,{className:"user-avatar"})})}return(0,x.jsx)("div",{className:"user-avatar",children:e.avatar&&(0,x.jsx)(T,{avatar:e.avatar})})}function T(e){var t;return(0,x.jsx)(f.dy,{unified:e.avatar,size:null!==(t=e.size)&&void 0!==t?t:18,getEmojiUrl:S})}},54663:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var s=n(9268);n(86006);var i=n(83287),r=n.n(i);function a(e){let{onChange:t,title:n,value:i,className:a,min:l,max:o,step:c}=e;return(0,s.jsxs)("div",{className:r()["input-range"]+" ".concat(null!=a?a:""),children:[n||i,(0,s.jsx)("input",{type:"range",title:n,value:i,min:l,max:o,step:c,onChange:t})]})}},80990:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var s=n(9268),i=n(79724),r=n(98767),a=n(54663),l=n(19319);function o(e){var t,n,o,c;let u=(0,i.MG)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.HC,{title:r.ZP.Settings.Model,children:(0,s.jsx)(l.Ph,{value:e.modelConfig.model,onChange:t=>{e.updateConfig(e=>e.model=i.Xm.model(t.currentTarget.value))},children:u.allModels().map((e,t)=>(0,s.jsx)("option",{value:e.name,disabled:!e.available,children:e.name},t))})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.Temperature.Title,subTitle:r.ZP.Settings.Temperature.SubTitle,children:(0,s.jsx)(a.O,{value:null===(t=e.modelConfig.temperature)||void 0===t?void 0:t.toFixed(1),min:"0",max:"1",step:"0.1",onChange:t=>{e.updateConfig(e=>e.temperature=i.Xm.temperature(t.currentTarget.valueAsNumber))}})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.TopP.Title,subTitle:r.ZP.Settings.TopP.SubTitle,children:(0,s.jsx)(a.O,{value:(null!==(c=e.modelConfig.top_p)&&void 0!==c?c:1).toFixed(1),min:"0",max:"1",step:"0.1",onChange:t=>{e.updateConfig(e=>e.top_p=i.Xm.top_p(t.currentTarget.valueAsNumber))}})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.MaxTokens.Title,subTitle:r.ZP.Settings.MaxTokens.SubTitle,children:(0,s.jsx)("input",{type:"number",min:100,max:1e5,value:e.modelConfig.max_tokens,onChange:t=>e.updateConfig(e=>e.max_tokens=i.Xm.max_tokens(t.currentTarget.valueAsNumber))})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.PresencePenalty.Title,subTitle:r.ZP.Settings.PresencePenalty.SubTitle,children:(0,s.jsx)(a.O,{value:null===(n=e.modelConfig.presence_penalty)||void 0===n?void 0:n.toFixed(1),min:"-2",max:"2",step:"0.1",onChange:t=>{e.updateConfig(e=>e.presence_penalty=i.Xm.presence_penalty(t.currentTarget.valueAsNumber))}})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.FrequencyPenalty.Title,subTitle:r.ZP.Settings.FrequencyPenalty.SubTitle,children:(0,s.jsx)(a.O,{value:null===(o=e.modelConfig.frequency_penalty)||void 0===o?void 0:o.toFixed(1),min:"-2",max:"2",step:"0.1",onChange:t=>{e.updateConfig(e=>e.frequency_penalty=i.Xm.frequency_penalty(t.currentTarget.valueAsNumber))}})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.InjectSystemPrompts.Title,subTitle:r.ZP.Settings.InjectSystemPrompts.SubTitle,children:(0,s.jsx)("input",{type:"checkbox",checked:e.modelConfig.enableInjectSystemPrompts,onChange:t=>e.updateConfig(e=>e.enableInjectSystemPrompts=t.currentTarget.checked)})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.InputTemplate.Title,subTitle:r.ZP.Settings.InputTemplate.SubTitle,children:(0,s.jsx)("input",{type:"text",value:e.modelConfig.template,onChange:t=>e.updateConfig(e=>e.template=t.currentTarget.value)})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.HistoryCount.Title,subTitle:r.ZP.Settings.HistoryCount.SubTitle,children:(0,s.jsx)(a.O,{title:e.modelConfig.historyMessageCount.toString(),value:e.modelConfig.historyMessageCount,min:"0",max:"64",step:"1",onChange:t=>e.updateConfig(e=>e.historyMessageCount=t.target.valueAsNumber)})}),(0,s.jsx)(l.HC,{title:r.ZP.Settings.CompressThreshold.Title,subTitle:r.ZP.Settings.CompressThreshold.SubTitle,children:(0,s.jsx)("input",{type:"number",min:500,max:4e3,value:e.modelConfig.compressMessageLengthThreshold,onChange:t=>e.updateConfig(e=>e.compressMessageLengthThreshold=t.currentTarget.valueAsNumber)})}),(0,s.jsx)(l.HC,{title:r.ZP.Memory.Title,subTitle:r.ZP.Memory.Send,children:(0,s.jsx)("input",{type:"checkbox",checked:e.modelConfig.sendMemory,onChange:t=>e.updateConfig(e=>e.sendMemory=t.currentTarget.checked)})})]})}},27189:function(e,t,n){"use strict";n.r(t),n.d(t,{Settings:function(){return z}});var s=n(9268),i=n(86006),r=n(71913),a=n.n(r),l=n(51150),o=n(46816),c=n(35520),u=n(46011),d=n(86224),p=n(70359),m=n(80199),h=n(83573),g=n(19319),v=n(80990),x=n(48),f=n(79724),j=n(98767),C=n(9881),b=n(35846),k=n.n(b),S=n(72908),y=n(3566),P=n(3686),T=n(54663),_=n(17005),Z=n(16778),E=n(41881),w=n(82561),M=n(74475);let H=(0,w.Ue)()((0,M.tJ)((e,t)=>({webDavConfig:{server:"",username:"",password:""},lastSyncTime:0,update(n){let s={...t().webDavConfig};n(s),e({webDavConfig:s})},async check(){try{let e=await fetch(this.path(""),{method:"PROFIND",headers:this.headers()});return console.log(e),207===e.status}catch(e){return console.error("[Sync] ",e),!1}},path(e){let n=t().webDavConfig.server;return n.endsWith("/")||(n+="/"),e.startsWith("/")&&(e=e.slice(1)),n+e},headers(){let e=btoa([t().webDavConfig.username,t().webDavConfig.password].join(":"));return{Authorization:"Basic ".concat(e)}}}),{name:S.KJ.Sync,version:1}));var N=n(35842);function O(e){let t=(0,y.f)(),n=t.get(e.id);return n?(0,s.jsx)("div",{className:"modal-mask",children:(0,s.jsx)(g.u_,{title:j.ZP.Settings.Prompt.EditModal.Title,onClose:e.onClose,actions:[(0,s.jsx)(x.h,{onClick:e.onClose,text:j.ZP.UI.Confirm,bordered:!0},"")],children:(0,s.jsxs)("div",{className:a()["edit-prompt-modal"],children:[(0,s.jsx)("input",{type:"text",value:n.title,readOnly:!n.isUser,className:a()["edit-prompt-title"],onInput:n=>t.update(e.id,e=>e.title=n.currentTarget.value)}),(0,s.jsx)(g.II,{value:n.content,readOnly:!n.isUser,className:a()["edit-prompt-content"],rows:10,onInput:n=>t.update(e.id,e=>e.content=n.currentTarget.value)})]})})}):null}function D(e){var t;let n=(0,y.f)(),r=n.getUserPrompts(),l=y.o.builtinPrompts,c=r.concat(l),[p,v]=(0,i.useState)(""),[f,b]=(0,i.useState)([]),k=p.length>0?f:c,[S,P]=(0,i.useState)();return(0,i.useEffect)(()=>{if(p.length>0){let e=y.o.search(p);b(e)}else b([])},[p]),(0,s.jsxs)("div",{className:"modal-mask",children:[(0,s.jsx)(g.u_,{title:j.ZP.Settings.Prompt.Modal.Title,onClose:()=>{var t;return null===(t=e.onClose)||void 0===t?void 0:t.call(e)},actions:[(0,s.jsx)(x.h,{onClick:()=>n.add({id:(0,N.x0)(),createdAt:Date.now(),title:"Empty Prompt",content:"Empty Prompt Content"}),icon:(0,s.jsx)(o.Z,{}),bordered:!0,text:j.ZP.Settings.Prompt.Modal.Add},"add")],children:(0,s.jsxs)("div",{className:a()["user-prompt-modal"],children:[(0,s.jsx)("input",{type:"text",className:a()["user-prompt-search"],placeholder:j.ZP.Settings.Prompt.Modal.Search,value:p,onInput:e=>v(e.currentTarget.value)}),(0,s.jsx)("div",{className:a()["user-prompt-list"],children:k.map((e,i)=>(0,s.jsxs)("div",{className:a()["user-prompt-item"],children:[(0,s.jsxs)("div",{className:a()["user-prompt-header"],children:[(0,s.jsx)("div",{className:a()["user-prompt-title"],children:e.title}),(0,s.jsx)("div",{className:a()["user-prompt-content"]+" one-line",children:e.content})]}),(0,s.jsxs)("div",{className:a()["user-prompt-buttons"],children:[e.isUser&&(0,s.jsx)(x.h,{icon:(0,s.jsx)(d.Z,{}),className:a()["user-prompt-button"],onClick:()=>n.remove(e.id)}),e.isUser?(0,s.jsx)(x.h,{icon:(0,s.jsx)(m.Z,{}),className:a()["user-prompt-button"],onClick:()=>P(e.id)}):(0,s.jsx)(x.h,{icon:(0,s.jsx)(h.Z,{}),className:a()["user-prompt-button"],onClick:()=>P(e.id)}),(0,s.jsx)(x.h,{icon:(0,s.jsx)(u.Z,{}),className:a()["user-prompt-button"],onClick:()=>(0,C.vQ)(e.content)})]})]},null!==(t=e.id)&&void 0!==t?t:e.title))})]})}),void 0!==S&&(0,s.jsx)(O,{id:S,onClose:()=>P(void 0)})]})}function U(){let e=(0,f.aK)(),t=(0,f.MG)();return(0,s.jsxs)(g.aV,{children:[(0,s.jsx)(g.HC,{title:j.ZP.Settings.Danger.Reset.Title,subTitle:j.ZP.Settings.Danger.Reset.SubTitle,children:(0,s.jsx)(x.h,{text:j.ZP.Settings.Danger.Reset.Action,onClick:async()=>{await (0,g.i0)(j.ZP.Settings.Danger.Reset.Confirm)&&t.reset()},type:"danger"})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.Danger.Clear.Title,subTitle:j.ZP.Settings.Danger.Clear.SubTitle,children:(0,s.jsx)(x.h,{text:j.ZP.Settings.Danger.Clear.Action,onClick:async()=>{await (0,g.i0)(j.ZP.Settings.Danger.Clear.Confirm)&&e.clearAllData()},type:"danger"})})]})}function A(){let e=H();return e.webDavConfig,null}function z(){var e,t,n,r,o;let u=(0,_.s0)(),[d,h]=(0,i.useState)(!1),C=(0,f.MG)(),b=C.update,w=(0,f.u2)(),[M,H]=(0,i.useState)(!1),N=w.formatVersion(w.version),O=w.formatVersion(w.remoteVersion),z=N!==O,V=(null===(e=(0,E.Z)())||void 0===e?void 0:e.isApp)?S.cr:S.Cs;function B(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];H(!0),w.getLatestVersion(e).then(()=>{H(!1)}),console.log("[Update] local version ",w.version),console.log("[Update] remote version ",w.remoteVersion)}let W={used:w.used,subscription:w.subscription},[F,I]=(0,i.useState)(!1);function R(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];L.hideBalanceQuery||(I(!0),w.updateUsage(e).finally(()=>{I(!1)}))}let L=(0,f._X)(),q=(0,i.useMemo)(()=>L.enabledAccessControl(),[]),X=(0,y.f)(),Q=y.o.count.builtin,K=null!==(t=X.getUserPrompts().length)&&void 0!==t?t:0,[J,G]=(0,i.useState)(!1),Y=L.isAuthorized();(0,i.useEffect)(()=>{B(),Y&&R()},[]),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u(S.y$.Home)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]);let $=(0,i.useMemo)(()=>(0,E.Z)(),[]),ee=q&&!(null==$?void 0:$.isApp);return(0,s.jsxs)(P.S,{children:[(0,s.jsxs)("div",{className:"window-header","data-tauri-drag-region":!0,children:[(0,s.jsxs)("div",{className:"window-header-title",children:[(0,s.jsx)("div",{className:"window-header-main-title",children:j.ZP.Settings.Title}),(0,s.jsx)("div",{className:"window-header-sub-title",children:j.ZP.Settings.SubTitle})]}),(0,s.jsxs)("div",{className:"window-actions",children:[(0,s.jsx)("div",{className:"window-action-button"}),(0,s.jsx)("div",{className:"window-action-button"}),(0,s.jsx)("div",{className:"window-action-button",children:(0,s.jsx)(x.h,{icon:(0,s.jsx)(c.Z,{}),onClick:()=>u(S.y$.Home),bordered:!0})})]})]}),(0,s.jsxs)("div",{className:a().settings,children:[(0,s.jsxs)(g.aV,{children:[(0,s.jsx)(g.HC,{title:j.ZP.Settings.Avatar,children:(0,s.jsx)(g.J2,{onClose:()=>h(!1),content:(0,s.jsx)(Z.aR,{onEmojiClick:e=>{b(t=>t.avatar=e),h(!1)}}),open:d,children:(0,s.jsx)("div",{className:a().avatar,onClick:()=>h(!0),children:(0,s.jsx)(Z.qE,{avatar:C.avatar})})})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.Update.Version(null!=N?N:"unknown"),subTitle:M?j.ZP.Settings.Update.IsChecking:z?j.ZP.Settings.Update.FoundUpdate(null!=O?O:"ERROR"):j.ZP.Settings.Update.IsLatest,children:M?(0,s.jsx)(p.Z,{}):z?(0,s.jsx)(k(),{href:V,target:"_blank",className:"link",children:j.ZP.Settings.Update.GoToUpdate}):(0,s.jsx)(x.h,{icon:(0,s.jsx)(l.Z,{}),text:j.ZP.Settings.Update.CheckUpdate,onClick:()=>B(!0)})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.SendKey,children:(0,s.jsx)(g.Ph,{value:C.submitKey,onChange:e=>{b(t=>t.submitKey=e.target.value)},children:Object.values(f.mQ).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.Theme,children:(0,s.jsx)(g.Ph,{value:C.theme,onChange:e=>{b(t=>t.theme=e.target.value)},children:Object.values(f.Q2).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.Lang.Name,children:(0,s.jsx)(g.Ph,{value:(0,j.VQ)(),onChange:e=>{(0,j.t4)(e.target.value)},children:j.DC.map(e=>(0,s.jsx)("option",{value:e,children:j.nW[e]},e))})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.FontSize.Title,subTitle:j.ZP.Settings.FontSize.SubTitle,children:(0,s.jsx)(T.O,{title:"".concat(null!==(n=C.fontSize)&&void 0!==n?n:14,"px"),value:C.fontSize,min:"12",max:"18",step:"1",onChange:e=>b(t=>t.fontSize=Number.parseInt(e.currentTarget.value))})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.SendPreviewBubble.Title,subTitle:j.ZP.Settings.SendPreviewBubble.SubTitle,children:(0,s.jsx)("input",{type:"checkbox",checked:C.sendPreviewBubble,onChange:e=>b(t=>t.sendPreviewBubble=e.currentTarget.checked)})})]}),(0,s.jsxs)(g.aV,{children:[(0,s.jsx)(g.HC,{title:j.ZP.Settings.Mask.Splash.Title,subTitle:j.ZP.Settings.Mask.Splash.SubTitle,children:(0,s.jsx)("input",{type:"checkbox",checked:!C.dontShowMaskSplashScreen,onChange:e=>b(t=>t.dontShowMaskSplashScreen=!e.currentTarget.checked)})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.Mask.Builtin.Title,subTitle:j.ZP.Settings.Mask.Builtin.SubTitle,children:(0,s.jsx)("input",{type:"checkbox",checked:C.hideBuiltinMasks,onChange:e=>b(t=>t.hideBuiltinMasks=e.currentTarget.checked)})})]}),(0,s.jsxs)(g.aV,{children:[(0,s.jsx)(g.HC,{title:j.ZP.Settings.Prompt.Disable.Title,subTitle:j.ZP.Settings.Prompt.Disable.SubTitle,children:(0,s.jsx)("input",{type:"checkbox",checked:C.disablePromptHint,onChange:e=>b(t=>t.disablePromptHint=e.currentTarget.checked)})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.Prompt.List,subTitle:j.ZP.Settings.Prompt.ListCount(Q,K),children:(0,s.jsx)(x.h,{icon:(0,s.jsx)(m.Z,{}),text:j.ZP.Settings.Prompt.Edit,onClick:()=>G(!0)})})]}),(0,s.jsxs)(g.aV,{children:[ee?(0,s.jsx)(g.HC,{title:j.ZP.Settings.AccessCode.Title,subTitle:j.ZP.Settings.AccessCode.SubTitle,children:(0,s.jsx)(g.WU,{value:L.accessCode,type:"text",placeholder:j.ZP.Settings.AccessCode.Placeholder,onChange:e=>{L.updateCode(e.currentTarget.value)}})}):(0,s.jsx)(s.Fragment,{}),L.hideUserApiKey?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.HC,{title:j.ZP.Settings.Endpoint.Title,subTitle:j.ZP.Settings.Endpoint.SubTitle,children:(0,s.jsx)("input",{type:"text",value:L.openaiUrl,placeholder:"https://api.openai.com/",onChange:e=>L.updateOpenAiUrl(e.currentTarget.value)})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.Token.Title,subTitle:j.ZP.Settings.Token.SubTitle,children:(0,s.jsx)(g.WU,{value:L.token,type:"text",placeholder:j.ZP.Settings.Token.Placeholder,onChange:e=>{L.updateToken(e.currentTarget.value)}})})]}),L.hideBalanceQuery?null:(0,s.jsx)(g.HC,{title:j.ZP.Settings.Usage.Title,subTitle:Y?F?j.ZP.Settings.Usage.IsChecking:j.ZP.Settings.Usage.SubTitle(null!==(r=null==W?void 0:W.used)&&void 0!==r?r:"[?]",null!==(o=null==W?void 0:W.subscription)&&void 0!==o?o:"[?]"):j.ZP.Settings.Usage.NoAccess,children:!Y||F?(0,s.jsx)("div",{}):(0,s.jsx)(x.h,{icon:(0,s.jsx)(l.Z,{}),text:j.ZP.Settings.Usage.Check,onClick:()=>R(!0)})}),(0,s.jsx)(g.HC,{title:j.ZP.Settings.CustomModel.Title,subTitle:j.ZP.Settings.CustomModel.SubTitle,children:(0,s.jsx)("input",{type:"text",value:C.customModels,placeholder:"model1,model2,model3",onChange:e=>C.update(t=>t.customModels=e.currentTarget.value)})})]}),(0,s.jsx)(A,{}),(0,s.jsx)(g.aV,{children:(0,s.jsx)(v.j,{modelConfig:C.modelConfig,updateConfig:e=>{let t={...C.modelConfig};e(t),C.update(e=>e.modelConfig=t)}})}),J&&(0,s.jsx)(D,{onClose:()=>G(!1)}),(0,s.jsx)(U,{})]})]})}},3566:function(e,t,n){"use strict";n.d(t,{f:function(){return u},o:function(){return c}});var s=n(82561),i=n(74475),r=n(10184),a=n(98767),l=n(72908),o=n(35842);let c={ready:!1,builtinEngine:new r.Z([],{keys:["title"]}),userEngine:new r.Z([],{keys:["title"]}),count:{builtin:0},allPrompts:[],builtinPrompts:[],init(e,t){this.ready||(this.allPrompts=t.concat(e),this.builtinPrompts=e.slice(),this.builtinEngine.setCollection(e),this.userEngine.setCollection(t),this.ready=!0)},remove(e){this.userEngine.remove(t=>t.id===e)},add(e){this.userEngine.add(e)},search(e){let t=this.userEngine.search(e),n=this.builtinEngine.search(e);return t.concat(n).map(e=>e.item)}},u=(0,s.Ue)()((0,i.tJ)((e,t)=>({counter:0,latestId:0,prompts:{},add(n){let s=t().prompts;return n.id=(0,o.x0)(),n.isUser=!0,n.createdAt=Date.now(),s[n.id]=n,e(()=>({latestId:n.id,prompts:s})),n.id},get(e){let n=t().prompts[e];return n||c.builtinPrompts.find(t=>t.id===e)},remove(n){let s=t().prompts;delete s[n],c.remove(n),e(()=>({prompts:s,counter:t().counter+1}))},getUserPrompts(){var e;let n=Object.values(null!==(e=t().prompts)&&void 0!==e?e:{});return n.sort((e,t)=>t.id&&e.id?t.createdAt-e.createdAt:0),n},update(n,s){var i;let r=null!==(i=t().prompts[n])&&void 0!==i?i:{title:"",content:"",id:n};c.remove(n),s(r);let a=t().prompts;a[n]=r,e(()=>({prompts:a})),c.add(r)},search:e=>0===e.length?t().getUserPrompts().concat(c.builtinPrompts):c.search(e)}),{name:l.KJ.Prompt,version:3,migrate(e,t){let n=JSON.parse(JSON.stringify(e));return t<3&&Object.values(n.prompts).forEach(e=>e.id=(0,o.x0)()),n},onRehydrateStorage(e){fetch("./prompts.json").then(e=>e.json()).then(e=>{var t;let n=[e.en,e.cn];"cn"===(0,a.VQ)()&&(n=n.reverse());let s=n.map(e=>e.map(e=>{let[t,n]=e;return{id:(0,o.x0)(),title:t,content:n,createdAt:Date.now()}})),i=null!==(t=u.getState().getUserPrompts())&&void 0!==t?t:[],r=s.reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.title&&!!e.content);c.count.builtin=e.en.length+e.cn.length,c.init(r,i)})}}))},83287:function(e){e.exports={"input-range":"input-range_input-range__SuxRd"}},71913:function(e){e.exports={settings:"settings_settings__427bK",avatar:"settings_avatar__jO3Wv","edit-prompt-modal":"settings_edit-prompt-modal__iP1gi","edit-prompt-title":"settings_edit-prompt-title__mq8os","edit-prompt-content":"settings_edit-prompt-content__9i9Y_","user-prompt-modal":"settings_user-prompt-modal__YWssH","user-prompt-search":"settings_user-prompt-search__kskD_","user-prompt-list":"settings_user-prompt-list__BrWRy","user-prompt-item":"settings_user-prompt-item__kh_6Q","user-prompt-header":"settings_user-prompt-header__MBMAf","user-prompt-title":"settings_user-prompt-title__BpRs1","user-prompt-content":"settings_user-prompt-content__CxL3R","user-prompt-buttons":"settings_user-prompt-buttons__y5Hf_","user-prompt-button":"settings_user-prompt-button__efhSx"}}}]);